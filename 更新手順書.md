# ①facebook APIユーザーアクセストークンの取得
## 1.https://developers.facebook.com/ へアクセスし「マイアプリ」をクリックします。


## 2.アプリを新規作成します。

## 3.作成するアプリに必要な機能を尋ねられるので、「その他」を選択します。

## 4.アプリの表示名を入力し、メールアドレスに間違いがないかを確認して「アプリを作成」をクリックします。

## 5.次にディベロッパーダッシュボードに進みますが、ダッシュボード上ですべきことは特にないです。代わりに、「Facebook Graph API Explorer」を開きます。https://developers.facebook.com/tools/explorer

## 6.「Facebookアプリ」で作成したアプリの名前を選択し、「ユーザーまたはページ」のメニューから「ユーザーアクセストークンを取得」を選択します。

## 7.モーダルウィンドウが表示されるので、自分のアカウントで「ログインする」をクリックします。

## 8.パーミッションでは以下のものを選択します。
・pages_show_list
・instagram_basic
・instagram_manage_insights
・pages_read_engagement
・pages_read_user_content
・pages_manage_posts
・pages_manage_engagement
public_profile

## 9.「Generate Access token」をクリックして、アクセストークンを生成します。

## 10.モーダルウィンドウが表示されるので自分のfacebookアカウントでログインするをクリックします。

## 11.「アプリから利用したいInstagramビジネスアカウントを選択してください。」と出てくるので用意したfacebookアカウントと連携しているInstagramビジネスアカウントを選択して「次へ」をクリックします。

## 12.「アプリからアクセスできるページの設定」」と出てくるので用意したfacebookアカウントと連携しているInstagramビジネスアカウントを選択して「次へ」をクリックします。

## 13.確認画面が出てくるのでレビューの申請等も必要ですが、ひとまず「完了」をクリックします。

## 14.「Facebookにリンクされました」と表示されるので「OK」をクリックします。

## 15.「Facebook Graph API Explorer」で新しいアクセストークンを確認できます。しかし、このアクセストークンは短期アクセストークンなので、１時間だけ有効になります。
長期アクセストークンを取得するために、さらに小さいインフォメーションアイコンを押し、「アクセストークンツールで開く」をクリックし「アクセストークンデバッガー」を開きます。

## 16.このページの下の方にある「アクセストークンを延長」をクリックします。

## 17.するとボタンの下に新たなアクセストークンテキストが出現するのですが、これは長期ユーザーアクセストークンです。「デバッグ」を押し「アクセストークンデバッガー」をさらに開き、コピーします。

# ②facebook APIページアクセストークンの取得
## 1.「Facebook Graph API Explorer」に戻り、「アクセストークン」に「長期ユーザーアクセストークン」をペーストします。

## 2.URL入力欄に　{FacebookページID}?fields=access_token　と入力し「送信」をクリックします。「FacebookページID」の取得方法は「参考１」を参照してください。
その後、中央の表示が画像のように更新されるので「access_token」の箇所にある「長期ページアクセストークン」を確認します。こちらをコピーしてメモしておきます。

# ③アプリのトークン更新方法
## 1.googleアカウントにログインします。

## 2.「SNSフォロワー推移管理」スプレッドシートを開き、「ツール」をクリックします。

## 3.ドロワーから「スクリプトエディタ」をクリックして開きます。

## 4.スクリプトエディタから「Instagram.gs」をクリックしてファイルを開きます。

## 5.「const ACCESS_TOKEN = ●●●」とある行を探し古いトークンを「②facebook APIページアクセストークンの取得」で取得した「長期ページアクセストークン」で置き換えます。



